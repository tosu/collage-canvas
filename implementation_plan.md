# 图片文件名标识（仅预览，不参与导出）实现方案

## 目标
- 在“长图发布”/普通模式下，为每张图片显示可开关的文件名标识，仅供排版参考。
- 默认关闭，用户可一键显示/隐藏全部标识；导出/复制的图像不包含标识。
- 保持当前排序/缩放/汉化模式等功能无回归。

## 体验设计
- 在侧边栏新增一个全局开关（如“显示文件名标识”），默认关闭；开启时所有图片左上角显示半透明标签。
- 标签样式：小圆角胶囊，深色半透明底，白字，轻微阴影；超长名称截断并提供 title 提示。
- 支持汉化模式/多 strip，同样位置展示；拖拽排序时标签跟随图片移动；镜像拖拽不必显示标签。

## 数据与状态
- 加载文件时保存 `originalName`（无扩展或含扩展均可，建议保留扩展，另存一份短名称用于展示）。
- 组件级状态：`showFilenames`（布尔），与开关绑定；默认 false。可存储在内存即可，不必持久化。

## 渲染策略
- 在 `render()` 创建/更新每个 `.image-item` 时，插入或更新一个 `.filename-badge` 元素；当 `showFilenames` 为 false 或未找到名称时隐藏（class `hidden`）。
- 样式通过 CSS 控制（不影响导出）：绝对定位左上，`pointer-events: none`；拖拽镜像不包含该元素。
- 导出/复制路径不变，仅绘制图片本身；不需要特殊处理即可保证不出现在导出结果。

## 交互/逻辑
- 开关事件：更新 `showFilenames`，触发一次 `render()` 或在现有节点上批量 toggle class。
- 排序/缩放/拖拽：标签作为 item 子节点随 transform/位移移动；在镜像克隆时可选择不克隆该元素（删除或不包含）。
- 汉化模式：同普通模式渲染标签；不影响 strip 计算。

## 实施步骤
1) 状态与数据
   - 在加载文件时将 `originalName`（与可选的 `displayName`）存入 `loadedImages` 元素。
   - 添加全局开关状态 `showFilenames = false`；在 UI（侧栏控制区）新增一个 checkbox/switch。
2) DOM 与样式
   - 在 `render()` 的 item 创建/更新分支插入 `.filename-badge`（含文本、title）。
   - CSS 新增 `.filename-badge` 与 `.filename-badge.hidden` 样式。
3) 交互
   - 开关 change 时：更新 `showFilenames`，调用 `render()` 或仅 toggle 现有 badge 的 `hidden` 类。
   - 拖拽镜像：创建镜像后移除其中的 `.filename-badge`（防止悬浮叠加）。
4) 验收
   - 开关打开时所有图片显示文件名；关闭时全部隐藏。
   - 拖拽/排序/缩放/汉化模式下标签随动且不影响布局；镜像不显示标签。
   - 导出/复制的图像不包含标签。
